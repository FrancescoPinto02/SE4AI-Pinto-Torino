schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data_ingestion.py
    deps:
    - path: .env
      hash: md5
      md5: 0c6167a40fe9e3ed8f87c6b863893a74
      size: 332
    - path: src/data_ingestion.py
      hash: md5
      md5: 888b8b4eacffbf27ad9782056a267420
      size: 1187
    outs:
    - path: data/raw/reviews.csv
      hash: md5
      md5: 7cd0cfaf0469f0d2455e81eb72d260c7
      size: 115914758
  preprocess_lightFM:
    cmd: python src/data/lightfm/preprocess_lightfm.py
    deps:
    - path: data/raw/games.csv
      hash: md5
      md5: 0ed65f5388c5f2db26074a03830c0a8b
      size: 7297388
    - path: data/raw/reviews.csv
      hash: md5
      md5: 7ae6fb3ab6385bf5db522bbd4878f670
      size: 115913820
    - path: src/data/lightfm/preprocess_lightfm.py
      hash: md5
      md5: d9c154cfe26ded4bbde4404d61203985
      size: 3436
    outs:
    - path: data/processed/lightfm/interactions.npz
      hash: md5
      md5: c60a9578d8c81b84460b29f77d26412d
      size: 491828
    - path: data/processed/lightfm/item_features.npz
      hash: md5
      md5: 71218784655567d825b626b9c7fdc7ce
      size: 21183
  preprocess_surprise_SVD:
    cmd: python src/data/surpriseSVD/preprocess_surprise_SVD.py
    deps:
    - path: data/raw/reviews.csv
      hash: md5
      md5: 7ae6fb3ab6385bf5db522bbd4878f670
      size: 115913820
    - path: src/data/surpriseSVD/preprocess_surprise_SVD.py
      hash: md5
      md5: 7216a520e057667454fabd24881ee33e
      size: 609
    outs:
    - path: data/processed/surpriseSVD/reviews_clean.csv
      hash: md5
      md5: 8e2ee927579fd01d070dff66f441073d
      size: 8350842
  train_surprise_SVD:
    cmd: python src/models/surpriseSVD/train_surprise_SVD.py
    deps:
    - path: data/processed/surpriseSVD/reviews_clean.csv
      hash: md5
      md5: 8e2ee927579fd01d070dff66f441073d
      size: 8350842
    - path: src/models/surpriseSVD/train_surprise_SVD.py
      hash: md5
      md5: 1f31e631761a0733ddbba4ff9d21eeb8
      size: 3605
    outs:
    - path: models/svd_best_params.txt
      hash: md5
      md5: c567da8da7a39b4f4bdfd6f1d108a9d1
      size: 51
    - path: models/svd_model.pkl
      hash: md5
      md5: 9106ff2cbbc2cb8b72ff3a8745a86555
      size: 14553699
  data_split_leave_last:
    cmd: python src/data/SVD/split_leave_last.py
    deps:
    - path: data/raw/reviews.csv
      hash: md5
      md5: 7ae6fb3ab6385bf5db522bbd4878f670
      size: 115913820
    - path: src/data/SVD/split_leave_last.py
      hash: md5
      md5: c0adb1c4f276c12f09868a5f6c340125
      size: 1177
    outs:
    - path: data/processed/SVD/test.csv
      hash: md5
      md5: 7d019f7bcd2a3844ddcdacece8d2a628
      size: 8078529
    - path: data/processed/SVD/train.csv
      hash: md5
      md5: 79110ab6cf5c7ee20b8e1c495fe9cdc9
      size: 107751246
  data_preprocess:
    cmd: python src/data/SVD/preprocess.py
    deps:
    - path: data/processed/SVD/test.csv
      hash: md5
      md5: 7d019f7bcd2a3844ddcdacece8d2a628
      size: 8078529
    - path: data/processed/SVD/train.csv
      hash: md5
      md5: 79110ab6cf5c7ee20b8e1c495fe9cdc9
      size: 107751246
    - path: src/data/SVD/preprocess.py
      hash: md5
      md5: c3da5f49c38e9d39bffd11b8473dd993
      size: 1018
    outs:
    - path: data/processed/SVD/test_ready.csv
      hash: md5
      md5: a1e2f0e8145bcc2a2d5bc18fe7d5791c
      size: 558106
    - path: data/processed/SVD/train_ready.csv
      hash: md5
      md5: ac5718ceacebe712a18759324dbad35c
      size: 7917106
  preprocess_data_SVD:
    cmd: python src/SVD/preprocess.py
    deps:
    - path: data/raw/reviews.csv
      hash: md5
      md5: 7cd0cfaf0469f0d2455e81eb72d260c7
      size: 115914758
    - path: src/SVD/preprocess.py
      hash: md5
      md5: 534cb9c216314951df64475c01e8f386
      size: 1336
    outs:
    - path: data/processed/SVD/ratings.csv
      hash: md5
      md5: 8ddd34c605b6fdb5b3f462b6019331f8
      size: 8118847
  train_SVD:
    cmd: python src/SVD/train.py
    deps:
    - path: config/params.yaml
      hash: md5
      md5: 003d2fe5858981d56f3e2e99759cb452
      size: 74
    - path: data/processed/SVD/ratings.csv
      hash: md5
      md5: 8ddd34c605b6fdb5b3f462b6019331f8
      size: 8118847
    - path: src/SVD/train.py
      hash: md5
      md5: a5c49849dd37a412b9cb7baec787a8be
      size: 4876
    outs:
    - path: models/svd_model.pkl
      hash: md5
      md5: 4303a740e39c09d91ceb1898eedcce4d
      size: 15243507
  tune_SVD:
    cmd: python src/SVD/tune.py
    deps:
    - path: data/processed/SVD/ratings.csv
      hash: md5
      md5: 8ddd34c605b6fdb5b3f462b6019331f8
      size: 8118847
    - path: src/SVD/tune.py
      hash: md5
      md5: f6a4b0fc561923d3c736662b66916ff4
      size: 4155
    outs:
    - path: config/params.yaml
      hash: md5
      md5: 003d2fe5858981d56f3e2e99759cb452
      size: 74
